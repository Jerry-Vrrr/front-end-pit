{"ast":null,"code":"import React,{useState,useContext}from\"react\";import axios from\"axios\";import AuthContext from\"../context/AuthContext\";import'./SignUpForm.css';// You can style this similarly to the login form\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignUpForm=()=>{const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[passwordConfirmation,setPasswordConfirmation]=useState(\"\");const[error,setError]=useState(null);const[loading,setLoading]=useState(false);const{login}=useContext(AuthContext);const handleSignUp=async e=>{e.preventDefault();setLoading(true);// Start loading when form is submitted\nsetError(null);// Clear previous error messages\ntry{const response=await axios.post(\"http://localhost:3000/sign_up\",{user:{email:email,password:password,password_confirmation:passwordConfirmation}});const sessionToken=response.headers[\"x-session-token\"];if(sessionToken){login(sessionToken);// Log in the user with the token\n}else{setError(\"No session token returned. Please contact support.\");}}catch(err){if(err.response&&err.response.data&&err.response.data.errors){// Display detailed validation errors returned from the backend\nsetError(err.response.data.errors.join(\", \"));}else{setError(\"Sign-up failed due to an unknown error. Please try again.\");}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"signup-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"signup-form\",onSubmit:handleSignUp,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:passwordConfirmation,onChange:e=>setPasswordConfirmation(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Signing Up...\":\"Sign Up\"})]})});};export default SignUpForm;","map":{"version":3,"names":["React","useState","useContext","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","SignUpForm","email","setEmail","password","setPassword","passwordConfirmation","setPasswordConfirmation","error","setError","loading","setLoading","login","handleSignUp","e","preventDefault","response","post","user","password_confirmation","sessionToken","headers","err","data","errors","join","className","children","onSubmit","style","color","type","value","onChange","target","required","disabled"],"sources":["/Users/jerryvohrer/bespoke-work/front-end-pit/src/components/SignUpForm.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport AuthContext from \"../context/AuthContext\";\nimport './SignUpForm.css'; // You can style this similarly to the login form\n\nconst SignUpForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const { login } = useContext(AuthContext);\n\n  const handleSignUp = async (e) => {\n    e.preventDefault();\n    setLoading(true); // Start loading when form is submitted\n    setError(null); // Clear previous error messages\n  \n    try {\n      const response = await axios.post(\"http://localhost:3000/sign_up\", {\n        user: {\n          email: email,\n          password: password,\n          password_confirmation: passwordConfirmation,\n        },\n      });\n  \n      const sessionToken = response.headers[\"x-session-token\"];\n  \n      if (sessionToken) {\n        login(sessionToken); // Log in the user with the token\n      } else {\n        setError(\"No session token returned. Please contact support.\");\n      }\n    } catch (err) {\n      if (err.response && err.response.data && err.response.data.errors) {\n        // Display detailed validation errors returned from the backend\n        setError(err.response.data.errors.join(\", \"));\n      } else {\n        setError(\"Sign-up failed due to an unknown error. Please try again.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n\n  return (\n    <div className=\"signup-container\">\n      <form className=\"signup-form\" onSubmit={handleSignUp}>\n        <h2>Sign Up</h2>\n        {error && <p style={{ color: \"red\" }}>{error}</p>}\n        <div>\n          <label>Email:</label>\n          <input\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </div>\n        <div>\n          <label>Confirm Password:</label>\n          <input\n            type=\"password\"\n            value={passwordConfirmation}\n            onChange={(e) => setPasswordConfirmation(e.target.value)}\n            required\n          />\n        </div>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"Signing Up...\" : \"Sign Up\"}\n        </button>\n      </form>\n    </div>\n  );\n\n};\n\nexport default SignUpForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}