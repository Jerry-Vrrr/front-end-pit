{"ast":null,"code":"var _jsxFileName = \"/Users/jerryvohrer/bespoke-work/front-end-pit/frontend/frontend/src/components/ClientDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { CompanyContext } from '../context/CompanyContext';\nimport './ClientDetail.css';\nimport play from '../assets/play.png';\nimport nope from '../assets/nope.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClientDetail = () => {\n  _s();\n  const {\n    companyId\n  } = useParams();\n  const {\n    COMPANY_MAPPING,\n    entriesLast24Hours,\n    gravityFormEntries,\n    totalCalls,\n    callsLast24Hours,\n    trend30Days,\n    trend24Hours\n  } = useContext(CompanyContext);\n  const [filteredData, setFilteredData] = useState([]);\n  const [filter, setFilter] = useState('all');\n  const [error, setError] = useState(null);\n  const [expandedEntries, setExpandedEntries] = useState([]);\n  const [showMoreCalls, setShowMoreCalls] = useState(false);\n  const [showMoreEntries, setShowMoreEntries] = useState(false);\n  const [allCalls, setAllCalls] = useState([]); // State to hold all call data\n  const [allEntries, setAllEntries] = useState([]); // State to hold all gravity form entries\n\n  const navigate = useNavigate();\n  const handleShowMoreCalls = () => {\n    setShowMoreCalls(!showMoreCalls);\n  };\n  const handleShowMoreEntries = () => {\n    setShowMoreEntries(!showMoreEntries);\n  };\n  const handleToggleExpand = id => {\n    setExpandedEntries(prevExpandedEntries => prevExpandedEntries.includes(id) ? prevExpandedEntries.filter(entryId => entryId !== id) : [...prevExpandedEntries, id]);\n  };\n  useEffect(() => {\n    const fetchCallData = async companyId => {\n      try {\n        const response = await axios.get(`http://localhost:3000/api/v1/call_rail_data?company_id=${companyId}`);\n        const calls = response.data;\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        const recentCalls = calls.filter(call => new Date(call.start_time) >= thirtyDaysAgo);\n        setTotalCalls(prev => ({\n          ...prev,\n          [companyId]: recentCalls.length\n        }));\n        const twentyFourHoursAgo = new Date();\n        twentyFourHoursAgo.setDate(twentyFourHoursAgo.getDate() - 1);\n        const recent24HourCalls = calls.filter(call => new Date(call.start_time) >= twentyFourHoursAgo);\n        setCallsLast24Hours(prev => ({\n          ...prev,\n          [companyId]: recent24HourCalls.length\n        }));\n        const previous30DaysCalls = calls.filter(call => new Date(call.start_time) < thirtyDaysAgo);\n        const previous30DaysCount = previous30DaysCalls.length;\n        setTrend30Days(prev => ({\n          ...prev,\n          [companyId]: recentCalls.length > previous30DaysCount ? 'trend-up' : 'trend-down'\n        }));\n        const previous24HoursCalls = calls.filter(call => new Date(call.start_time) < twentyFourHoursAgo);\n        const previous24HoursCount = previous24HoursCalls.length;\n        setTrend24Hours(prev => ({\n          ...prev,\n          [companyId]: recent24HourCalls.length > previous24HoursCount ? 'trend-up' : 'trend-down'\n        }));\n\n        // Add the fetched calls to the allCalls state\n        setAllCalls(prev => [...prev, ...calls]);\n      } catch (error) {\n        console.error('Error fetching the call data for company:', error);\n      }\n    };\n    const fetchGravityFormsData = async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/api/v1/gravity_forms/entries');\n        const entries = response.data;\n        const twentyFourHoursAgo = new Date();\n        twentyFourHoursAgo.setDate(twentyFourHoursAgo.getDate() - 1);\n        const newEntries = {};\n        entries.forEach(entry => {\n          const companyId = entry.company_id;\n          if (new Date(entry.date_created) >= twentyFourHoursAgo) {\n            if (!newEntries[companyId]) {\n              newEntries[companyId] = 0;\n            }\n            newEntries[companyId]++;\n          }\n        });\n        setEntriesLast24Hours(newEntries);\n        setGravityFormEntries(entries); // Store all entries in state\n\n        // Add all entries to allEntries state\n        setAllEntries(entries);\n      } catch (error) {\n        console.error('Error fetching Gravity Forms data:', error);\n      }\n    };\n    fetchGravityFormsData();\n    fetchCallData();\n  }, [companyId]);\n  const handleFilterChange = selectedFilter => {\n    try {\n      setFilter(selectedFilter);\n      let filtered = filteredData;\n      if (selectedFilter === 'over2minutes') {\n        filtered = filteredData.filter(call => call.duration > 120);\n      } else if (selectedFilter === 'repeat') {\n        const callMap = new Map();\n        filtered = filteredData.filter(call => {\n          if (callMap.has(call.customer_phone_number)) {\n            return true;\n          } else {\n            callMap.set(call.customer_phone_number, true);\n            return false;\n          }\n        });\n      } else if (selectedFilter === 'unanswered') {\n        filtered = filteredData.filter(call => !call.answered);\n      } else {\n        filtered = filteredData;\n      }\n      setFilteredData(filtered);\n    } catch (error) {\n      console.error('Error applying filter:', error);\n      setError('Error applying filter. Please try again later.');\n      navigate('/');\n    }\n  };\n  const formatDuration = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n  };\n  if (!COMPANY_MAPPING[companyId]) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Company not found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"client-detail-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [COMPANY_MAPPING[companyId], \" Interaction Hub\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"call-label\",\n        children: [\"New Chats: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `number ${(entriesLast24Hours === null || entriesLast24Hours === void 0 ? void 0 : entriesLast24Hours[companyId]) > 0 ? 'trend-up' : ''}`,\n          children: (entriesLast24Hours === null || entriesLast24Hours === void 0 ? void 0 : entriesLast24Hours[companyId]) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"call-label\",\n        children: [\"Total Calls: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `number ${trend30Days[companyId]}`,\n          children: totalCalls[companyId] || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"call-label\",\n        children: [\"Calls Today: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `number ${trend24Hours[companyId]}`,\n          children: callsLast24Hours[companyId] || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 49\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleFilterChange('all'),\n        children: \"All Calls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleFilterChange('over2minutes'),\n        children: \"Calls Over 2 Minutes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleFilterChange('repeat'),\n        children: \"Repeat Calls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleFilterChange('unanswered'),\n        children: \"Unanswered Calls\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }, this) : filteredData.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"client-detail-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Date & Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Duration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Recording\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: filteredData.slice(0, showMoreCalls ? filteredData.length : 5).map(call => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: call.customer_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: call.customer_phone_number ? /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"phone\",\n              href: `tel:${call.customer_phone_number}`,\n              children: `(${call.customer_phone_number.slice(2, 5)}) ${call.customer_phone_number.slice(5, 8)}-${call.customer_phone_number.slice(8)}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 21\n            }, this) : 'N/A'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: new Date(call.start_time).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatDuration(call.duration)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            style: {\n              borderBottom: '1px solid #ddd',\n              padding: '8px'\n            },\n            children: call.recording_player ? /*#__PURE__*/_jsxDEV(\"a\", {\n              href: call.recording_player,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: play,\n                alt: \"Play Recording\",\n                width: \"20\",\n                height: \"20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: nope,\n              alt: \"No Recording\",\n              width: \"20\",\n              height: \"20\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }, this)]\n        }, call.call_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }, this), filteredData.length > 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"show-more-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"show-more-button\",\n          onClick: handleShowMoreCalls,\n          children: showMoreCalls ? 'Show Less' : 'Show More'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No calls found for this client.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Gravity Forms Entries\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gravity-forms-data\",\n      children: gravityFormEntries.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"gravity-forms-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Message\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Date & Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: gravityFormEntries.filter(entry => entry.company_id === companyId) // Filter entries by selected company\n          .slice(0, showMoreEntries ? gravityFormEntries.length : 5).map(entry => {\n            var _entry$message;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.phone ? /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"phone\",\n                  href: `tel:${entry.phone}`,\n                  children: (() => {\n                    // Remove all non-numeric characters\n                    const cleanedNumber = entry.phone.replace(/\\D/g, '');\n                    // Format the cleaned number\n                    return `(${cleanedNumber.slice(0, 3)}) ${cleanedNumber.slice(3, 6)}-${cleanedNumber.slice(6)}`;\n                  })()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 5\n                }, this) : 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_entry$message = entry.message) === null || _entry$message === void 0 ? void 0 : _entry$message.length) > 100 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: expandedEntries.includes(entry.id) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [entry.message, /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"show-button\",\n                      onClick: () => handleToggleExpand(entry.id),\n                      children: \"Show Less\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [entry.message.substring(0, 100), \"...\", /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"show-button\",\n                      onClick: () => handleToggleExpand(entry.id),\n                      children: \"Show More\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true)\n                }, void 0, false) : entry.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(entry.date_created).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 21\n              }, this)]\n            }, entry.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this), gravityFormEntries.length > 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"show-more-container\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"show-more-button\",\n            onClick: handleShowMoreEntries,\n            children: showMoreEntries ? 'Show Less' : 'Show More'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No Gravity Forms entries found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n_s(ClientDetail, \"rRw74wffMCGYHy9YvUl9EBFCkOA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ClientDetail;\nexport default ClientDetail;\nvar _c;\n$RefreshReg$(_c, \"ClientDetail\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","useNavigate","axios","CompanyContext","play","nope","jsxDEV","_jsxDEV","Fragment","_Fragment","ClientDetail","_s","companyId","COMPANY_MAPPING","entriesLast24Hours","gravityFormEntries","totalCalls","callsLast24Hours","trend30Days","trend24Hours","filteredData","setFilteredData","filter","setFilter","error","setError","expandedEntries","setExpandedEntries","showMoreCalls","setShowMoreCalls","showMoreEntries","setShowMoreEntries","allCalls","setAllCalls","allEntries","setAllEntries","navigate","handleShowMoreCalls","handleShowMoreEntries","handleToggleExpand","id","prevExpandedEntries","includes","entryId","fetchCallData","response","get","calls","data","thirtyDaysAgo","Date","setDate","getDate","recentCalls","call","start_time","setTotalCalls","prev","length","twentyFourHoursAgo","recent24HourCalls","setCallsLast24Hours","previous30DaysCalls","previous30DaysCount","setTrend30Days","previous24HoursCalls","previous24HoursCount","setTrend24Hours","console","fetchGravityFormsData","entries","newEntries","forEach","entry","company_id","date_created","setEntriesLast24Hours","setGravityFormEntries","handleFilterChange","selectedFilter","filtered","duration","callMap","Map","has","customer_phone_number","set","answered","formatDuration","seconds","mins","Math","floor","secs","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","slice","map","customer_name","href","toLocaleString","style","borderBottom","padding","recording_player","target","rel","src","alt","width","height","call_id","_entry$message","name","phone","cleanedNumber","replace","email","message","substring","_c","$RefreshReg$"],"sources":["/Users/jerryvohrer/bespoke-work/front-end-pit/frontend/frontend/src/components/ClientDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { CompanyContext } from '../context/CompanyContext'; \nimport './ClientDetail.css'; \nimport play from '../assets/play.png';\nimport nope from '../assets/nope.png';\n\nconst ClientDetail = () => {\n  const { companyId } = useParams();\n  const { COMPANY_MAPPING, entriesLast24Hours, gravityFormEntries, totalCalls, callsLast24Hours, trend30Days, trend24Hours } = useContext(CompanyContext);\n  const [filteredData, setFilteredData] = useState([]);\n  const [filter, setFilter] = useState('all');\n  const [error, setError] = useState(null);\n  const [expandedEntries, setExpandedEntries] = useState([]);\n  const [showMoreCalls, setShowMoreCalls] = useState(false);\n  const [showMoreEntries, setShowMoreEntries] = useState(false);\n  const [allCalls, setAllCalls] = useState([]);  // State to hold all call data\n  const [allEntries, setAllEntries] = useState([]);  // State to hold all gravity form entries\n\n  \n  const navigate = useNavigate();\n  \n  const handleShowMoreCalls = () => {\n    setShowMoreCalls(!showMoreCalls);\n  };\n  \n  const handleShowMoreEntries = () => {\n    setShowMoreEntries(!showMoreEntries);\n  };\n  \n  const handleToggleExpand = (id) => {\n    setExpandedEntries((prevExpandedEntries) =>\n      prevExpandedEntries.includes(id)\n        ? prevExpandedEntries.filter((entryId) => entryId !== id)\n        : [...prevExpandedEntries, id]\n    );\n  };\n  \n  useEffect(() => {\n    const fetchCallData = async (companyId) => {\n      try {\n        const response = await axios.get(`http://localhost:3000/api/v1/call_rail_data?company_id=${companyId}`);\n        const calls = response.data;\n    \n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n    \n        const recentCalls = calls.filter(call => new Date(call.start_time) >= thirtyDaysAgo);\n        setTotalCalls(prev => ({ ...prev, [companyId]: recentCalls.length }));\n        \n        const twentyFourHoursAgo = new Date();\n        twentyFourHoursAgo.setDate(twentyFourHoursAgo.getDate() - 1);\n        const recent24HourCalls = calls.filter(call => new Date(call.start_time) >= twentyFourHoursAgo);\n        setCallsLast24Hours(prev => ({ ...prev, [companyId]: recent24HourCalls.length }));\n    \n        const previous30DaysCalls = calls.filter(call => new Date(call.start_time) < thirtyDaysAgo);\n        const previous30DaysCount = previous30DaysCalls.length;\n        setTrend30Days(prev => ({ ...prev, [companyId]: recentCalls.length > previous30DaysCount ? 'trend-up' : 'trend-down' }));\n    \n        const previous24HoursCalls = calls.filter(call => new Date(call.start_time) < twentyFourHoursAgo);\n        const previous24HoursCount = previous24HoursCalls.length;\n        setTrend24Hours(prev => ({ ...prev, [companyId]: recent24HourCalls.length > previous24HoursCount ? 'trend-up' : 'trend-down' }));\n    \n        // Add the fetched calls to the allCalls state\n        setAllCalls(prev => [...prev, ...calls]);\n    \n      } catch (error) {\n        console.error('Error fetching the call data for company:', error);\n      }\n    };\n\n    const fetchGravityFormsData = async () => {\n      try {\n        const response = await axios.get('http://localhost:3000/api/v1/gravity_forms/entries');\n        const entries = response.data;\n    \n        const twentyFourHoursAgo = new Date();\n        twentyFourHoursAgo.setDate(twentyFourHoursAgo.getDate() - 1);\n    \n        const newEntries = {};\n        entries.forEach(entry => {\n          const companyId = entry.company_id;\n          if (new Date(entry.date_created) >= twentyFourHoursAgo) {\n            if (!newEntries[companyId]) {\n              newEntries[companyId] = 0;\n            }\n            newEntries[companyId]++;\n          }\n        });\n    \n        setEntriesLast24Hours(newEntries);\n        setGravityFormEntries(entries);  // Store all entries in state\n    \n        // Add all entries to allEntries state\n        setAllEntries(entries);\n    \n      } catch (error) {\n        console.error('Error fetching Gravity Forms data:', error);\n      }\n    };\n    \n    fetchGravityFormsData()\n    fetchCallData();\n  }, [companyId]);\n\n  const handleFilterChange = (selectedFilter) => {\n    try {\n      setFilter(selectedFilter);\n\n      let filtered = filteredData;\n\n      if (selectedFilter === 'over2minutes') {\n        filtered = filteredData.filter(call => call.duration > 120);\n      } else if (selectedFilter === 'repeat') {\n        const callMap = new Map();\n        filtered = filteredData.filter(call => {\n          if (callMap.has(call.customer_phone_number)) {\n            return true;\n          } else {\n            callMap.set(call.customer_phone_number, true);\n            return false;\n          }\n        });\n      } else if (selectedFilter === 'unanswered') {\n        filtered = filteredData.filter(call => !call.answered);\n      } else {\n        filtered = filteredData;\n      }\n\n      setFilteredData(filtered);\n    } catch (error) {\n      console.error('Error applying filter:', error);\n      setError('Error applying filter. Please try again later.');\n      navigate('/');\n    }\n  };\n\n  const formatDuration = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n  };\n\n  if (!COMPANY_MAPPING[companyId]) {\n    return <p>Company not found.</p>;\n  }\n\n  return (\n    <div className=\"client-detail-container\">\n      <h1>{COMPANY_MAPPING[companyId]} Interaction Hub</h1>\n      <div className=\"stats\">\n        <p className='call-label'>New Chats: <span className={`number ${entriesLast24Hours?.[companyId] > 0 ? 'trend-up' : ''}`}>{entriesLast24Hours?.[companyId] || 0}</span></p>\n        <p className='call-label'>Total Calls: <span className={`number ${trend30Days[companyId]}`}>{totalCalls[companyId] || 0}</span></p>\n        <p className='call-label' >Calls Today: <span className={`number ${trend24Hours[companyId]}`}>{callsLast24Hours[companyId] || 0}</span></p>\n      </div>\n      <div className=\"filter-buttons\">\n        <button onClick={() => handleFilterChange('all')}>All Calls</button>\n        <button onClick={() => handleFilterChange('over2minutes')}>Calls Over 2 Minutes</button>\n        <button onClick={() => handleFilterChange('repeat')}>Repeat Calls</button>\n        <button onClick={() => handleFilterChange('unanswered')}>Unanswered Calls</button>\n      </div>\n      {error ? (\n        <p className=\"error-message\">{error}</p>\n      ) : filteredData.length > 0 ? (\n        <table className=\"client-detail-table\">\n          <thead>\n            <tr>\n              <th>Customer</th>\n              <th>Number</th>\n              <th>Date & Time</th>\n              <th>Duration</th>\n              <th>Recording</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredData.slice(0, showMoreCalls ? filteredData.length : 5).map((call) => (\n              <tr key={call.call_id}>\n                <td>{call.customer_name}</td>\n                <td>\n                  {call.customer_phone_number ? (\n                    <a className='phone' href={`tel:${call.customer_phone_number}`}>\n                      {`(${call.customer_phone_number.slice(2, 5)}) ${call.customer_phone_number.slice(5, 8)}-${call.customer_phone_number.slice(8)}`}\n                    </a>\n                  ) : (\n                    'N/A'\n                  )}\n                </td>\n                <td>{new Date(call.start_time).toLocaleString()}</td>\n                <td>{formatDuration(call.duration)}</td>\n                <td style={{ borderBottom: '1px solid #ddd', padding: '8px' }}>\n                  {call.recording_player ? (\n                    <a href={call.recording_player} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <img src={play} alt=\"Play Recording\" width=\"20\" height=\"20\" />\n                    </a>\n                  ) : (\n                    <img src={nope} alt=\"No Recording\" width=\"20\" height=\"20\" />\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n          {filteredData.length > 5 && (\n            <div className=\"show-more-container\">\n              <button className=\"show-more-button\" onClick={handleShowMoreCalls}>\n                {showMoreCalls ? 'Show Less' : 'Show More'}\n              </button>\n            </div>\n          )}\n        </table>\n      ) : (\n        <p>No calls found for this client.</p>\n      )}\n      <h2>Gravity Forms Entries</h2>\n      <div className=\"gravity-forms-data\">\n        {gravityFormEntries.length > 0 ? (\n          <table className=\"gravity-forms-table\">\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Phone Number</th>\n                <th>Email</th>\n                <th>Message</th>\n                <th>Date & Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {gravityFormEntries\n                .filter(entry => entry.company_id === companyId) // Filter entries by selected company\n                .slice(0, showMoreEntries ? gravityFormEntries.length : 5)\n                .map((entry) => (\n                  <tr key={entry.id}>\n                    <td>{entry.name}</td>\n                    <td>\n  {entry.phone ? (\n    <a className='phone' href={`tel:${entry.phone}`}>\n      {(() => {\n        // Remove all non-numeric characters\n        const cleanedNumber = entry.phone.replace(/\\D/g, '');\n        // Format the cleaned number\n        return `(${cleanedNumber.slice(0, 3)}) ${cleanedNumber.slice(3, 6)}-${cleanedNumber.slice(6)}`;\n      })()}\n    </a>\n  ) : (\n    'N/A'\n  )}\n</td>\n\n                    <td>{entry.email}</td>\n                    <td>\n                      {entry.message?.length > 100 ? (\n                        <>\n                          {expandedEntries.includes(entry.id) ? (\n                            <>\n                              {entry.message}\n                              <button className='show-button' onClick={() => handleToggleExpand(entry.id)}>Show Less</button>\n                            </>\n                          ) : (\n                            <>\n                              {entry.message.substring(0, 100)}...\n                              <button className='show-button' onClick={() => handleToggleExpand(entry.id)}>Show More</button>\n                            </>\n                          )}\n                        </>\n                      ) : (\n                        entry.message\n                      )}\n                    </td>\n                    <td>{new Date(entry.date_created).toLocaleString()}</td>\n                  </tr>\n                ))}\n            </tbody>\n            {gravityFormEntries.length > 5 && (\n              <div className=\"show-more-container\">\n                <button className=\"show-more-button\" onClick={handleShowMoreEntries}>\n                  {showMoreEntries ? 'Show Less' : 'Show More'}\n                </button>\n              </div>\n            )}\n          </table>\n        ) : (\n          <p>No Gravity Forms entries found.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ClientDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}